<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>نظام امتحان الجهاز المركزي</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        direction: rtl;
        background-color: #f9f9f9;
        margin: 0;
        padding: 0;
      }
      .container {
        margin: 50px auto;
        padding: 20px;
        border-radius: 8px;
        text-align: start;
      }
      h1,
      h2 {
        color: #333;
      }
      #welcome-screen {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      button {
        display: block;
        padding: 10px 20px;
        background-color: #06896f;
        color: #fff;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        margin: 10px auto;
        font-weight: 600;
      }
      button:hover {
        background-color: #2a3139;
      }
      button:disabled {
        background-color: #606d68;
        cursor: not-allowed;
      }
      ol {
        display: flex;
        flex-wrap: wrap;
        gap: 35px;
        justify-content: center;
        align-items: flex-start;
        list-style: none;
        padding: 0;
        font-weight: 900;
      }
      ul {
        text-align: justify;
        color: #2a2aef;
      }
      h3 {
        text-align: justify;
        margin-right: 33px;
        text-decoration: underline;
        font-size: 22px;
      }
      p {
        margin-bottom: 0;
        font-size: 18px;
        line-height: 1.6;
      }
      img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 6px;
      }
      .hidden {
        display: none;
      }
      #timer {
        font-size: 18px;
        margin-bottom: 20px;
        color: red;
        font-weight: bold;
      }
      #question-container {
        margin: 20px 0;
        padding: 15px;
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
      .active_test {
        background: #0adf98;
        color: #000;
        width: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        font-size: 18px;
        border-radius: 5px;
        font-weight: bolder;
      }
      .disactive_test {
        background: #606d68;
        color: #ffffff;
        width: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        font-size: 18px;
        border-radius: 5px;
      }
      .color_list {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 11px;
        margin-bottom: 30px;
      }
      .active_color,
      .disactive_color {
        width: 25px;
        height: 25px;
        border-radius: 50%;
      }
      .active_color {
        background: #0adf98;
      }
      .disactive_color {
        background: #606d68;
      }
      .color_list span {
        color: #ff0000;
        font-weight: 800;
        font-size: 23px;
      }
      .test_description {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      #next-section-screen {
        text-align: center;
        padding: 30px;
        background-color: #fff8dc;
        border: 1px solid #ccc;
        border-radius: 10px;
        margin: 20px auto;
        max-width: 500px;
      }
      .lang-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
      }
      .lang-buttons button {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
      }
      .lang-buttons img {
        width: 50px;
        height: 50px;
      }
    </style>
  </head>
  <body>
    <div class="container" id="main-container">
      <!-- الصفحة الرئيسية -->
      <div id="welcome-screen">
        <h1>مرحباً بك في امتحان الجهاز المركزي</h1>
        <button onclick="startExam()" id="start-button">البدء</button>
      </div>

      <!-- صفحة المحاور -->
      <div id="section-screen" class="hidden">
        <h3 style="color: red">نفيدكم علماً بالتالي</h3>
        <ul>
          <li>
            ترتيب الامتحانات كما هو موضح بالشكل التالي ابتداءً بامتحانات الجدرات
            السلوكية.
          </li>
          <li>حفظ الإجابة يتم باختيار إحدى الإجابات ثم الضغط على التالي.</li>
        </ul>
        <div class="color_list">
          <div class="active_color"></div>
          <span>مفعل</span>
          <div class="disactive_color"></div>
          <span>غير مفعل</span>
        </div>
        <ol id="section-list">
          <div class="test_description" data-section="behavior">
            <img src="https://i.ibb.co/c6X9VtD/behavior.jpg" />
            <li class="active_test">جدارات سلوكية</li>
            <p>اختبار لقياس ١٢ سمة شخصية</p>
          </div>
          <div class="test_description" data-section="job">
            <img src="https://i.ibb.co/ZVmr9x5/job.jpg" />
            <li class="disactive_test">جدارات وظيفية</li>
            <p>قياس الجدارات المطلوبة للمجال</p>
          </div>
          <div class="test_description" data-section="iq">
            <img src="https://i.ibb.co/B3bF2CP/iq.jpg" />
            <li class="disactive_test">اختبار IQ</li>
            <p>صور + متتاليات</p>
          </div>
          <div class="test_description" data-section="language">
            <img src="https://i.ibb.co/0VPHn2C/language.jpg" />
            <li class="disactive_test">اللغة</li>
            <p>اختبار عربي + إنجليزي</p>
          </div>
          <div class="test_description" data-section="general">
            <img src="https://i.ibb.co/0fbhdfP/general.jpg" />
            <li class="disactive_test">معلومات عامة</li>
            <p>تاريخ وجغرافيا وغيرها</p>
          </div>
          <div class="test_description" data-section="computer">
            <img src="https://i.ibb.co/X7CLrFG/computer.jpg" />
            <li class="disactive_test">الحاسب</li>
            <p>عربي أو إنجليزي</p>
          </div>
          <div class="test_description" data-section="specialization">
            <img src="https://i.ibb.co/k1DgYz6/specialization.jpg" />
            <li class="disactive_test">التخصص</li>
            <p>اختبار في التخصص المطلوب</p>
          </div>
        </ol>
      </div>

      <!-- شاشة الامتحان -->
      <div id="quiz-screen" class="hidden">
        <div id="timer">الوقت:</div>
        <div id="question-container"></div>
        <button id="next-button" onclick="nextQuestion()">التالي</button>
      </div>

      <!-- شاشة النتيجة -->
      <div id="result-screen" class="hidden"></div>

      <!-- شاشة المحور التالي -->
      <div id="next-section-screen" class="hidden"></div>
    </div>

    <script>
      const allQuestions = {
        behavior: [
          {
            q: "ما هي عاصمة مصر؟",
            options: ["القاهرة", "الإسكندرية", "الأقصر", "أسوان"],
            answer: 0,
          },
          {
            q: "ما هو أكبر نهر في العالم؟",
            options: ["النيل", "الأمازون", "الدانوب", "اليانغتسي"],
            answer: 1,
          },
        ],
        job: [
          { q: "ما هو دورك في الوظيفة؟", options: ["إدارة", "دعم"], answer: 0 },
        ],
        iq_images: [
          {
            q: "اختر الصورة المناسبة للنمط",
            options: ["A", "B", "C", "D"],
            answer: 2,
          },
        ],
        iq_sequences: [
          { q: "اكمل: 2, 4, 6, ?", options: ["7", "8", "9", "10"], answer: 1 },
        ],
        arabic: [
          {
            q: "مرادف 'ذكي'؟",
            options: ["غبي", "نبيه", "كسول", "مغرور"],
            answer: 1,
          },
        ],
        english: [
          {
            q: "Synonym of 'smart'?",
            options: ["Dumb", "Clever", "Lazy", "Mean"],
            answer: 1,
          },
        ],
        general: [
          {
            q: "أين تقع الأهرامات؟",
            options: ["القاهرة", "الجيزة", "الأقصر"],
            answer: 1,
          },
        ],
        computer_ar: [
          { q: "ما هو نظام التشغيل؟", options: ["ويندوز", "ورد"], answer: 0 },
        ],
        computer_en: [
          { q: "What is an OS?", options: ["Windows", "Excel"], answer: 0 },
        ],
        specialization: [
          {
            q: "ما هي لغة تصميم المواقع؟",
            options: ["HTML", "C++"],
            answer: 0,
          },
        ],
      };

      const sectionOrder = [
        "behavior",
        "job",
        "iq",
        "language",
        "general",
        "computer",
        "specialization",
      ];

      let currentSectionIndex = 0;
      let currentQuestionIndex = 0;
      let currentSection = null;
      let score = 0;
      let timer;
      let sectionDone = { arabic: false, english: false };

      function startExam() {
        document.getElementById("welcome-screen").classList.add("hidden");
        document.getElementById("section-screen").classList.remove("hidden");
      }

      function launchQuiz(sectionKey) {
        currentSection = sectionKey;
        currentQuestionIndex = 0;
        score = 0;
        showQuizScreen();
        loadQuestion();
        startTimer();
      }

      function showQuizScreen() {
        document.getElementById("quiz-screen").classList.remove("hidden");
        document.getElementById("result-screen").classList.add("hidden");
        document.getElementById("next-section-screen").classList.add("hidden");
      }

      function loadQuestion() {
        const question = allQuestions[currentSection][currentQuestionIndex];
        const container = document.getElementById("question-container");
        container.innerHTML =
          `<p>${question.q}</p>` +
          question.options
            .map(
              (opt, i) =>
                `<label><input type="radio" name="answer" value="${i}" /> ${opt}</label><br />`
            )
            .join("");
      }

      function nextQuestion() {
        const selected = document.querySelector("input[name='answer']:checked");
        if (selected) {
          const value = parseInt(selected.value);
          if (
            value === allQuestions[currentSection][currentQuestionIndex].answer
          ) {
            score++;
          }
        }
        currentQuestionIndex++;
        if (currentQuestionIndex < allQuestions[currentSection].length) {
          loadQuestion();
        } else {
          endQuiz();
        }
      }

      function startTimer() {
        clearInterval(timer);
        const totalQuestions = allQuestions[currentSection].length;
        let time = totalQuestions * 30;
        const timerDiv = document.getElementById("timer");
        timerDiv.textContent = `الوقت: ${time}`;
        timer = setInterval(() => {
          time--;
          timerDiv.textContent = `الوقت: ${time}`;
          if (time <= 0) {
            clearInterval(timer);
            endQuiz();
          }
        }, 1000);
      }

      function endQuiz() {
        clearInterval(timer);
        document.getElementById("quiz-screen").classList.add("hidden");

        if (currentSection === "iq_images") {
          launchQuiz("iq_sequences");
          return;
        }

        if (currentSection === "arabic" || currentSection === "english") {
          sectionDone[currentSection] = true;
          if (sectionDone.arabic && sectionDone.english) {
            showNextSectionScreen();
          } else {
            showLanguageChoice();
          }
          return;
        }

        showNextSectionScreen();
      }

      function showNextSectionScreen() {
        document
          .getElementById("next-section-screen")
          .classList.remove("hidden");
        const nextSection = sectionOrder[currentSectionIndex + 1];
        if (!nextSection) {
          document.getElementById(
            "next-section-screen"
          ).innerHTML = `<h2>انتهت جميع المحاور</h2>`;
          return;
        }
        const nextName = translateSection(nextSection);
        document.getElementById("next-section-screen").innerHTML = `
    <h2>انتهى المحور: ${translateSection(currentSection)}</h2>
    <p>المحور التالي:</p>
    <div class="test_description">
      <img src="${
        document.querySelector('[data-section="' + nextSection + '"] img').src
      }" />
      <li class="active_test">${nextName}</li>
    </div>
    <button onclick="goToNextSection()">ابدأ الآن</button>
  `;
      }

      function goToNextSection() {
        currentSectionIndex++;
        const next = sectionOrder[currentSectionIndex];
        if (!next) {
          alert("انتهت جميع المحاور!");
          return;
        }
        if (next === "iq") {
          launchQuiz("iq_images");
        } else if (next === "language") {
          showLanguageChoice();
        } else {
          launchQuiz(next);
        }
      }

      function showLanguageChoice() {
        document.getElementById("result-screen").classList.remove("hidden");
        document.getElementById("result-screen").innerHTML = `
    <h2>اختر اختبار اللغة:</h2>
    <div class="lang-buttons">
      <button onclick="launchQuiz('arabic')" ${
        sectionDone.arabic ? "disabled" : ""
      }>
        <img src="https://i.ibb.co/0VPHn2C/language.jpg" /> عربي
      </button>
      <button onclick="launchQuiz('english')" ${
        sectionDone.english ? "disabled" : ""
      }>
        <img src="https://i.ibb.co/0VPHn2C/language.jpg" /> English
      </button>
    </div>
  `;
      }

      function translateSection(key) {
        const map = {
          behavior: "جدارات سلوكية",
          job: "جدارات وظيفية",
          iq: "اختبار IQ",
          iq_images: "اختبار صور",
          iq_sequences: "اختبار متتاليات",
          language: "اللغة",
          arabic: "كفايات لغوية - عربي",
          english: "كفايات لغوية - إنجليزي",
          general: "معلومات عامة",
          computer: "الحاسب",
          specialization: "التخصص",
        };
        return map[key] || key;
      }
    </script>
  </body>
</html>
